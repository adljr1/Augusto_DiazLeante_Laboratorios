-- Q0
use zarabusiness;

-- Q1: Selecciona todos los clientes
SELECT * FROM Clientes;

-- Q2: Selecciona todos los empleados
SELECT * FROM Empleados;

-- Q3: Selecciona todas las tiendas
SELECT * FROM Tiendas;

-- Q4: Selecciona todas las prendas de ropa
SELECT * FROM Prendas;

-- Q5: Busca clientes cuyo nombre comience con la letra "L"
SELECT * FROM Clientes
WHERE nombre_cliente LIKE 'L%';

-- Q6: Cuenta cuántos clientes hay en la base de datos
SELECT COUNT(*) AS total_clientes
FROM Clientes;

-- Q7: Selecciona las compras realizadas después del 1 de mayo de 2023
SELECT * FROM Compras
WHERE fecha_compra > '2023-05-01';

-- Q8: Actualiza el correo electrónico de un cliente específico
UPDATE Clientes
SET email_cliente = 'nuevo_correo@email.com'
WHERE id_cliente = 1;

-- Q9: Elimina un cliente por su ID
DELETE FROM Clientes
WHERE id_cliente = 5;

-- Q10: Selecciona las prendas de color Negro
SELECT * FROM Prendas
WHERE color = 'Negro';

-- Q11: Selecciona todas las tiendas que hay en Madrid
SELECT * FROM Tiendas
WHERE ciudad = 'Madrid';

-- Q12: Cuenta cuántas prendas tienen un precio mayor a 50
SELECT COUNT(*) AS prendas_mayor_50
FROM Prendas
WHERE precio > 50;

-- Q13: Selecciona los empleados que trabajan en la tienda con ID 1
SELECT * FROM Empleados
WHERE tienda_id = 1;

-- Q14: Busca clientes cuyo nombre contenga "Andrés"
SELECT * FROM Clientes
WHERE nombre_cliente LIKE '%Andrés%';

-- Q15: Selecciona las compras realizadas por el cliente con ID 2
SELECT * FROM Compras
WHERE id_cliente = 2;

-- Q16: Elimina todas las compras cuyo monto sea menor a 30
SET SQL_SAFE_UPDATES = 0;

DELETE FROM Compras
WHERE monto_total < 30
  AND id_compra IS NOT NULL;

-- Q17: Selecciona las prendas cuyo precio esté entre 20 y 40
SELECT * FROM Prendas
WHERE precio BETWEEN 20 AND 40;

-- Q18: Busca empleados cuyo nombre contenga la letra "a"
SELECT * FROM Empleados
WHERE nombre_empleado LIKE '%a%';

-- Q19: Selecciona las 5 prendas más caras
SELECT * FROM Prendas
ORDER BY precio DESC
LIMIT 5;

-- Q20: Selecciona las compras de un cliente con un monto superior a 75
SELECT * FROM Compras
WHERE monto_total > 75;

-- Q21: Selecciona las prendas de talla M
SELECT * FROM Prendas
WHERE talla = 'M';

-- Q22: Actualiza la talla de una prenda específica por su ID
UPDATE Prendas
SET talla = 'L'
WHERE id_prenda = 1;

-- Q23: Selecciona todos los empleados contratados después del 1 de enero de 2022
SELECT * FROM Empleados
WHERE fecha_contratacion > '2022-01-01';

-- Q24: Busca tiendas en "Barcelona"
SELECT * FROM Tiendas
WHERE ciudad = 'Barcelona';

-- Q25: Elimina un empleado por su ID
DELETE FROM Empleados
WHERE id_empleado = 1;

-- Q26: Selecciona las compras que se realizaron antes del 1 de julio de 2023
SELECT * FROM Compras
WHERE fecha_compra < '2023-07-01';

-- Q27: Busca prendas cuyo nombre termine en "eta"
SELECT * FROM Prendas
WHERE tipo_prenda LIKE '%eta';

-- Q28: Selecciona los clientes que no tengan un email registrado con "hotmail"
SELECT * FROM Clientes
WHERE email_cliente NOT LIKE '%hotmail%';

-- Q29: Cuenta cuántas compras se realizaron en septiembre de 2023
SELECT COUNT(*) AS compras_septiembre
FROM Compras
WHERE MONTH(fecha_compra) = 9 AND YEAR(fecha_compra) = 2023;

-- Q30: Actualiza la dirección de una tienda por su ID
UPDATE Tiendas
SET direccion = 'Nueva dirección 123'
WHERE id_tienda = 1;

-- Q31: Selecciona las prendas que sean camisetas
SELECT * FROM Prendas
WHERE tipo_prenda LIKE '%Camiseta%';

-- Q32: Elimina todas las prendas cuyo precio sea menor a 20
DELETE FROM Prendas
WHERE precio < 20;

-- Q33: Selecciona todas las tiendas y ordénalas por ciudad
SELECT * FROM Tiendas
ORDER BY ciudad;

-- Q34: Selecciona los empleados que sean vendedores
SELECT * FROM Empleados
WHERE puesto = 'Vendedor';

-- Q35: Cuenta cuántas prendas son de color blanco
SELECT COUNT(*) AS prendas_blancas
FROM Prendas
WHERE color = 'Blanco';

-- Q36: Selecciona los clientes que tengan nombres de más de 10 caracteres
SELECT * FROM Clientes
WHERE LENGTH(nombre_cliente) > 10;

-- Q37: Busca compras cuyo monto total esté entre 50 y 100
SELECT * FROM Compras
WHERE monto_total BETWEEN 50 AND 100;

-- Q38: Selecciona las 3 compras más recientes
SELECT * FROM Compras
ORDER BY fecha_compra DESC
LIMIT 3;

-- Q39: Busca cursos cuyo nombre contenga la palabra "Digital"
SELECT * FROM Cursos
WHERE nombre_curso LIKE '%Digital%';

-- Q40: Agrupa las prendas por color y cuenta cuántas hay de cada color
SELECT color, COUNT(*) AS cantidad
FROM Prendas
GROUP BY color;

-- Q41: Añade dos tiendas más que existan en Madrid y no estén en la base de datos
INSERT INTO Tiendas (id_tienda, nombre_tienda, ciudad, direccion)
VALUES (101, 'Zara Madrid Centro', 'Madrid', 'Calle Mayor 15'),
       (102, 'Zara Madrid Norte', 'Madrid', 'Av. Castellana 200');

-- Q42: Cambiar Miguel Torres a Micaela y actualizar su email
UPDATE Clientes
SET nombre_cliente = 'Micaela Torres',
    email_cliente= 'micaela.torres@email.com'
WHERE nombre_cliente = 'Miguel Torres';
